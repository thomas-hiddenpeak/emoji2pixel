<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emoji2Pixel</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Â∑¶‰æßÊéßÂà∂Èù¢Êùø -->
        <aside class="control-panel">
            <header class="app-header">
                <div class="app-title">
                    <h1>üé® Emoji2Pixel</h1>
                </div>
                <div class="app-lang">
                    <select id="langSelect" class="lang-select"></select>
                </div>
            </header>

            <!-- ËæìÂÖ•Âå∫Âüü -->
            <div class="input-section">
                <div class="input-row">
                    <button id="emojiFitToggle" class="emoji-fit-toggle" title="Ëá™Âä®ÊãüÂêà" data-i18n-title="autoFit">A</button>
                    <input type="text" id="emojiInput" placeholder="input emoji" data-i18n-placeholder="inputEmoji" maxlength="4">
                    <button id="addImageBtn" class="btn btn-icon" title="ÂØºÂÖ•ÂõæÁâá" data-i18n-title="importImage" type="button">üñº</button>
                    <button id="addEmojiBtn" class="btn btn-primary" style="min-width:60px;font-weight:bold;" type="button" title="Ê∑ªÂä†ÂÖ≥ÈîÆÂ∏ß" data-i18n-title="addFrame">+</button>
                </div>
                <input type="file" id="emojiImageInput" class="emoji-image-input" accept="image/*">
                <div class="emoji-fit-row" id="emojiFitRow">
                    <input type="range" id="emojiScaleInput" min="0.25" max="5" step="0.01" value="0.75">
                    <span class="emoji-fit-value" id="emojiScaleValue">0.75x</span>
                </div>
                <input type="text" id="emojiSearchInput" class="emoji-search" placeholder="Âø´ÈÄüÊ£ÄÁ¥¢" data-i18n-placeholder="quickSearch">
                <div class="emoji-nav" id="emojiNav"></div>
                <div class="emoji-scroll" id="emojiGrid">
                    <div class="emoji-loading" data-i18n="loadingEmoji">Ê≠£Âú®Âä†ËΩΩemoji...</div>
                </div>
            </div>

            <!-- ÂÖ≥ÈîÆÂ∏ßÂàóË°® -->
            <div class="frames-section">
                <div class="frames-header">
                    <span id="frameCount">ÂÖ≥ÈîÆÂ∏ß (0)</span>
                    <div class="tween-setting">
                        <label data-i18n="tweenLabel">ËøáÊ∏°:</label>
                        <input type="number" id="tweenFramesInput" min="0" max="20" step="1" value="5">
                    </div>
                    <button id="clearFramesBtn" class="btn btn-icon btn-danger" title="Ê∏ÖÁ©∫" data-i18n-title="clear">üóë</button>
                </div>
                <span class="tween-info" id="tweenInfo"></span>
                <div class="frames-container" id="framesContainer">
                    <div class="empty-frames" data-i18n="emptyFrames">Ê∑ªÂä†emojiÂàõÂª∫Âä®Áîª</div>
                </div>
            </div>

            <!-- Âä®ÁîªÊéßÂà∂ -->
            <div class="animation-section">
                <div class="anim-controls">
                    <button id="playBtn" class="btn btn-icon" title="Êí≠Êîæ" data-i18n-title="play">‚ñ∂</button>
                    <button id="pauseBtn" class="btn btn-icon" title="ÊöÇÂÅú" data-i18n-title="pause">‚è∏</button>
                    <input type="number" id="animSpeed" min="20" max="5000" step="50" value="500">
                    <span id="speedValue">500ms</span>
                </div>
            </div>
        </aside>

        <!-- Âè≥‰æßÈ¢ÑËßàÂå∫Âüü -->
        <main class="preview-area">
            <div class="preview-toolbar">
                <!-- ÁîªÂ∏ÉËÆæÁΩÆ -->
                <div class="canvas-settings">
                    <div class="setting-item">
                        <label data-i18n="size">Â∞∫ÂØ∏</label>
                        <div class="unit-field">
                            <input type="number" id="displayWidthInput" min="50" max="300" step="0.1" value="160">
                            <span class="unit-badge" data-unit-target="display">mm</span>
                        </div>
                        <span class="unit">W</span>
                        <div class="unit-field">
                            <input type="number" id="displayHeightInput" min="50" max="300" step="0.1" value="160">
                            <span class="unit-badge" data-unit-target="display">mm</span>
                        </div>
                        <span class="unit">H</span>
                    </div>
                    <div class="setting-divider" aria-hidden="true"></div>
                    <div class="setting-item">
                        <label data-i18n="pixelSize">ÂÉèÁ¥†Â§ßÂ∞è</label>
                        <div class="unit-field">
                            <input type="number" id="pixelSizeInput" min="1" max="10" step="0.1" value="4">
                            <span class="unit-badge" data-unit-target="size">mm</span>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label data-i18n="gap">Èó¥Èöô</label>
                        <div class="unit-field">
                            <input type="number" id="gapSizeInput" min="0" max="5" step="0.1" value="1">
                            <span class="unit-badge" data-unit-target="size">mm</span>
                        </div>
                    </div>
                    <div class="setting-divider" aria-hidden="true"></div>
                    <div class="setting-item">
                        <label data-i18n="unit">Âçï‰Ωç</label>
                        <select id="unitSelect" class="unit-select">
                            <option value="mm" selected>mm</option>
                            <option value="in">in</option>
                        </select>
                    </div>
                    <div class="setting-divider" aria-hidden="true"></div>
                    <div class="setting-item">
                        <label data-i18n="matrix">Áü©Èòµ</label>
                        <input type="number" id="gridWidthInput" min="8" max="128" step="1" value="32">
                        <span class="unit">W</span>
                        <input type="number" id="gridHeightInput" min="8" max="128" step="1" value="32">
                        <span class="unit">H</span>
                    </div>
                    <div class="setting-item">
                        <label data-i18n="mode">Ê®°Âºè</label>
                        <select id="renderModeSelect">
                            <option value="ideal" selected data-i18n="renderIdeal">ÁêÜÊÉ≥</option>
                            <option value="bare" data-i18n="renderBare">Ë£∏Êòæ</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label data-i18n="shape">ÂΩ¢Áä∂</label>
                        <div class="pixel-style-toggle">
                            <button class="style-btn active" data-style="rounded" title="ÂúÜËßí" data-i18n-title="shapeRounded">‚ñ¢</button>
                            <button class="style-btn" data-style="square" title="ÊñπÂΩ¢" data-i18n-title="shapeSquare">‚ñ†</button>
                            <button class="style-btn" data-style="circle" title="ÂúÜÂΩ¢" data-i18n-title="shapeCircle">‚óè</button>
                        </div>
                    </div>
                </div>
                <!-- ÂØºÂá∫ÊåâÈíÆ -->
                <div class="export-controls">
                    <select id="exportTypeSelect">
                        <option value="raw" selected data-i18n="exportRaw">ÂéüÂßãÂÉèÁ¥†</option>
                        <option value="preview" data-i18n="exportPreview">È¢ÑËßàÂõæ</option>
                    </select>
                    <button id="downloadBtn" class="btn btn-small" data-i18n="downloadPng">PNG</button>
                    <button id="downloadGifBtn" class="btn btn-small btn-primary" data-i18n="downloadGif">GIF</button>
                    <button id="copyBtn" class="btn btn-small" data-i18n="copy">Â§çÂà∂</button>
                </div>
            </div>
            <div class="canvas-container">
                <canvas id="mainCanvas" width="640" height="640"></canvas>
                <canvas id="selectionCanvas" width="640" height="640"></canvas>
            </div>
            <div class="canvas-hint" id="canvasHint" data-i18n="canvasHint">ÊãñÊãΩÁßªÂä® | ÊªöËΩÆÁº©Êîæ | Shift+ÊãñÊãΩÊóãËΩ¨</div>
            <div class="preview-shortcuts">
                <span class="keycap">A</span><span data-i18n="shortcutRect">Ê°ÜÈÄâ</span>
                <span class="keycap">I</span><span data-i18n="shortcutColor">ÊåâËâ≤</span>
                <span class="keycap">F</span><span data-i18n="shortcutFill">Â°´Ëâ≤</span>
                <span class="keycap">Del</span><span data-i18n="shortcutDelete">Ê∏ÖÁ©∫</span>
                <span class="keycap">Cmd/Ctrl+C</span><span data-i18n="shortcutCopy">Â§çÂà∂</span>
                <span class="keycap">Cmd/Ctrl+V</span><span data-i18n="shortcutPaste">Á≤òË¥¥</span>
                <span class="keycap">Cmd/Ctrl+Z</span><span data-i18n="shortcutUndo">Êí§ÈîÄ</span>
            </div>
            <div class="preview-author">
                <span data-i18n="authorBy">By Thomas</span>
                <span style="margin: 0 8px; opacity: 0.5;">|</span>
                <a href="https://github.com/thomas-hiddenpeak/emoji2pixel" target="_blank" rel="noopener noreferrer" style="color: inherit; text-decoration: none;">
                    <span style="opacity: 0.8;">‚≠ê GitHub</span>
                </a>
                <button id="tianshanUploadBtn" class="btn btn-small" data-i18n="exportTianshan">TianshanOS</button>
            </div>
            <div class="pixel-tools" id="pixelTools">
                <div class="pixel-tools-header" data-i18n="tools">Â∑•ÂÖ∑</div>
                <div class="pixel-tools-section">
                    <div class="pixel-tools-title" data-i18n="general">ÈÄöÁî®</div>
                    <div class="tool-grid">
                        <button id="clearSelectionBtn" class="tool-btn" type="button" title="ÂèñÊ∂àÈÄâÊã© (Esc)" data-i18n-title="cancelSelect"><span class="tool-icon">‚úï</span><span class="tool-text" data-i18n="cancel">ÂèñÊ∂à</span></button>
                        <button id="bgUndoBtn" class="tool-btn" type="button" title="Êí§ÈîÄ (Cmd/Ctrl+Z)" data-i18n-title="undo"><span class="tool-icon">‚Ü∂</span><span class="tool-text" data-i18n="undo">Êí§ÈîÄ</span></button>
                    </div>
                </div>
                <div class="pixel-tools-section">
                    <div class="pixel-tools-title" data-i18n="select">ÈÄâÊã©</div>
                    <div class="tool-grid">
                        <button id="selectToggleBtn" class="tool-btn" type="button" title="Ê°ÜÈÄâ (A)" data-i18n-title="rectSelect"><span class="tool-icon">‚ñ°</span><span class="tool-text" data-i18n="rectSelect">Ê°ÜÈÄâ</span></button>
                        <button id="colorSelectBtn" class="tool-btn" type="button" title="Ëâ≤ÈÄâ/Âê∏ÁÆ° (I)" data-i18n-title="colorSelect"><span class="tool-icon">‚¶ø</span><span class="tool-text" data-i18n="colorSelect">Ëâ≤ÈÄâ/Âê∏ÁÆ°</span></button>
                    </div>
                    <div class="tool-row tool-row-compact">
                        <input type="color" id="bgColorInput" class="color-input-wide" value="#000000" title="ÁõÆÊ†áÈ¢úËâ≤" data-i18n-title="targetColor">
                        <input type="range" id="bgToleranceInput" min="0" max="100" step="1" value="15" title="ÂÆπÂ∑Æ" data-i18n-title="tolerance">
                        <span id="bgToleranceValue">15</span>
                    </div>
                </div>
                <div class="pixel-tools-section">
                    <div class="pixel-tools-title" data-i18n="actions">Êìç‰Ωú</div>
                    <div class="tool-grid">
                        <button id="eraseSelectionBtn" class="tool-btn" type="button" title="Âà†Èô§ÈÄâÂå∫ (Del)" data-i18n-title="delete"><span class="tool-icon">‚å´</span><span class="tool-text" data-i18n="delete">Âà†Èô§</span></button>
                        <button id="fillSelectionBtn" class="tool-btn" type="button" title="Â°´ÂÖÖÈÄâÂå∫ (F)" data-i18n-title="fill"><span class="tool-icon">‚ñ†</span><span class="tool-text" data-i18n="fill">Â°´ÂÖÖ</span></button>
                        <button id="copySelectionBtn" class="tool-btn" type="button" title="Â§çÂà∂ (Cmd/Ctrl+C)" data-i18n-title="copy"><span class="tool-icon">‚ßâ</span><span class="tool-text" data-i18n="copy">Â§çÂà∂</span></button>
                        <button id="pasteSelectionBtn" class="tool-btn" type="button" title="Á≤òË¥¥ (Cmd/Ctrl+V)" data-i18n-title="paste"><span class="tool-icon">‚éò</span><span class="tool-text" data-i18n="paste">Á≤òË¥¥</span></button>
                    </div>
                </div>
                <div class="pixel-tools-section">
                    <div class="pixel-tools-title" data-i18n="transform">ÂèòÂΩ¢</div>
                    <div class="transform-bar">
                        <div class="transform-item">
                            <span data-i18n="scale">Áº©Êîæ</span>
                            <input type="range" id="scaleSlider" min="50" max="150" value="100">
                            <span id="scaleValue">100%</span>
                        </div>
                        <div class="transform-item">
                            <span>X</span>
                            <input type="range" id="offsetXSlider" min="-16" max="16" value="0">
                            <span id="offsetXValue">0</span>
                        </div>
                        <div class="transform-item">
                            <span>Y</span>
                            <input type="range" id="offsetYSlider" min="-16" max="16" value="0">
                            <span id="offsetYValue">0</span>
                        </div>
                        <div class="transform-item">
                            <span data-i18n="rotate">ÊóãËΩ¨</span>
                            <input type="range" id="rotateSlider" min="0" max="360" value="0">
                            <span id="rotateValue">0¬∞</span>
                        </div>
                        <button id="resetTransformBtn" class="btn btn-small" data-i18n="reset">ÈáçÁΩÆ</button>
                    </div>
                </div>
                <div class="pixel-tools-section">
                    <div class="pixel-tools-title" data-i18n="degrade">Âä£Âåñ</div>
                    <div class="render-bar">
                        <div class="render-item render-item-quantize">
                            <label class="render-item-inline">
                                <input type="checkbox" id="quantizeToggle">
                                <span data-i18n="quantize">ÈáèÂåñ</span>
                            </label>
                            <span data-i18n="colors">È¢úËâ≤</span>
                            <input type="range" id="quantizeColorsInput" min="2" max="256" step="1" value="64">
                        </div>
                        <div class="render-item">
                            <span data-i18n="sharpen">ÈîêÂåñ</span>
                            <select id="sharpenModeSelect">
                                <option value="none" selected data-i18n="sharpenNone">Êó†</option>
                                <option value="cross">ÈÇªÂüü</option>
                                <option value="unsharp">Unsharp</option>
                            </select>
                        </div>
                        <div class="render-item">
                            <span data-i18n="strength">Âº∫Â∫¶</span>
                            <input type="range" id="sharpenStrengthInput" min="0" max="100" step="5" value="40">
                        </div>
                        <label class="render-item render-item-center">
                            <input type="checkbox" id="frameRenderToggle">
                            <span data-i18n="currentFrame">ÂΩìÂâçÂ∏ß</span>
                        </label>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="locales/locales.js"></script>
    <script src="app.js"></script>
</body>
</html>
